<div class="card">
  <% if !@profile.nil? %>

  <div class="card-title">
    <h3><%= @profile.nicname %></h3>
  </div>
  <div class="card-image">
    <img class="media-object img-rounded img-responsive" src="<%= gravatar_url(@user, { size: 500 }) %>" alt="">
  </div>

  <div class="card-content">
    <!-- Dropdown Trigger -->
    <% if user_signed_in? %>
      <a class='dropdown-trigger right black-text' href='#' data-target='dropdown1'><i class="material-icons">more_vert</i></a>
    <% end %>

    <!-- Dropdown Structure -->
    <ul id='dropdown1' class='dropdown-content'>
      <li><%= link_to 'プロフィール編集', edit_profile_path(@profile), data: {turbolinks: false},class: 'right'%></li>

      <% if mastodon_connected? %>
        <li><%= link_to 'マストドン連携解除', current_user.weightodon,
                        method: :delete, data: { confirm: '本当に削除してよろしいですか？' } %></li>
      <% else %>
        <li><%= link_to 'マストドン連携', new_weightodon_path %></li>
      <% end %>
      <li><%= link_to 'トークン発行', current_user.profile ,
                      method: :delete, data: { confirm: '既存のトークンは破棄され、新しいトークンを生成します。' } %></li>
    </ul>

    <table>
      <tr>
        <th>ニックネーム</th>
        <td><%= @profile.nicname %></td>
      </tr>
      <tr>
        <th>公開設定</th>
        <td><%= @profile.public %></td>
      </tr>
      <tr>
        <th>身長</th>
        <td><%= @profile.height %> cm</td>
      </tr>
      <tr>
        <th>開始時の体重</th>
        <td><%= @profile.start_weight %> kg</td>
      </tr>
      <tr>
        <th>性別</th>
        <td><%= @profile.sex %></td>
      </tr>
      <tr>
        <th>年齢</th>
        <td><%= @profile.age %></td>
      </tr>
      <tr>
        <th>一言メッセージ</th>
        <td><%= @profile.message %></td>
      </tr>
    </table>


  </div>
  <% end %>
</div>
